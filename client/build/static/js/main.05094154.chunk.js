(this.webpackJsonpbostonsdeals=this.webpackJsonpbostonsdeals||[]).push([[0],{170:function(e,t,a){e.exports=a(391)},176:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(50),o=a.n(s),r=a(5),i=a(168),c=(a(175),a(24)),d=a(29),u=a(30),h=a(32),p=a(31),m=a(33),g=a(160),y=a(72),f=a.n(y),E=a(392),v=(a(176),a(167)),k=a(52),O=Object(k.withScriptjs)(Object(k.withGoogleMap)((function(e){return l.a.createElement("div",{className:"expandedCard"},l.a.createElement("h4",{className:"address"},e.address),l.a.createElement(k.GoogleMap,{defaultZoom:15,defaultCenter:{lat:e.lat,lng:e.lng}},l.a.createElement(k.Marker,{defaultPosition:{lat:e.lat,lng:e.lng}})))})));function C(){var e=Object(g.a)(["\n\tquery GET_POSTS($location: String, $dayOfWeek: String){\n\t\tposts(location: $location dayOfWeek: $dayOfWeek) {\n\t\t\tid\n\t\t\tcompanyName\n\t\t\taddress\n\t\t\tlocation\n\t\t\tdescription\n\t\t\tdayOfWeek\n\t\t\tlat\n\t\t\tlng\n\t\t}\n\t}\n"]);return C=function(){return e},e}var b=f()(C()),S=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=function(t){"googleMap"!==t.target.parentNode.parentNode.parentNode.parentNode.className&&e.setState(Object(c.a)({},t.currentTarget.id,!e.state[t.currentTarget.id]))};return l.a.createElement(E.a,{query:b,variables:{location:this.props.location,dayOfWeek:this.props.dayOfWeek},onCompleted:function(t){return t.posts.forEach((function(t){return e.setState(Object(c.a)({},t.id,!1))}))}},(function(a){var n=a.loading,s=a.data;return!n&&l.a.createElement("div",null,s.posts.length>0?l.a.createElement("h4",{id:"tagline"},e.props.location.length>0?s.posts.length+" d":"D","eal",s.posts.length>1&&"s"," ",e.props.location.length>0&&"in ",l.a.createElement("span",{className:"location"},e.props.location)," for ",e.props.dayOfWeek):l.a.createElement("h4",{id:"tagline"},"No results for '",e.props.location,"'. Try again?"),l.a.createElement("div",{id:"card-wrapper"},s.posts.map((function(a){return l.a.createElement(v.Spring,{from:{opacity:0,marginTop:-15},to:{opacity:1,marginTop:0},key:a.id},(function(n){return l.a.createElement("div",{onClick:t,className:"card",style:n,key:a.id,id:a.id},l.a.createElement("div",{className:"defaultCard"},l.a.createElement("div",{className:"info"},l.a.createElement("h2",{className:"description"},a.description),l.a.createElement("h3",{className:"companyName"},a.companyName),l.a.createElement("h4",{className:"location"},l.a.createElement("i",{className:"fas fa-map-marker-alt",style:{paddingRight:".5rem"}}),a.location)),l.a.createElement("div",{className:"directions"},l.a.createElement("i",{className:"fas fa-directions"}))),e.state[a.id]?l.a.createElement(O,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAeR4JJANXM7oOYOzhXYlrcQeJ5y0FKRw4&v=3.exp&libraries=geometry,drawing,places",loadingElement:l.a.createElement("div",{className:"googleMap",style:{height:"100%"}}),containerElement:l.a.createElement("div",{className:"googleMap"}),mapElement:l.a.createElement("div",{className:"googleMap",style:{height:"100%"}}),lat:a.lat,lng:a.lng,address:a.address}):l.a.createElement("div",{className:"more"},l.a.createElement("i",{className:"fas fa-angle-double-down"}),l.a.createElement("em",null,l.a.createElement("h6",null,"more"))))}))}))))}))}}]),t}(l.a.Component),W=a(73),N=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).onTextChanged=function(e){var t=e.target.value,n=[];if(t.length>0){var l=new RegExp("^".concat(t),"i");n=a.items.sort().filter((function(e){return l.test(e)}))}a.props.onTextChanged(n,t),a.setState((function(){return{suggestions:n,text:t}}))},a.handleLocationSelect=function(e){a.setState((function(){return{text:e,suggestions:[]}}));a.props.onTextChanged([],e),a.props.handleSelect(e)},a.items=["North End","Cambridge","South End","Back Bay","Copley Square","Harvard Square","Financial District","Fenway/Kenmore","Somerville","Brighton","Davis Square","Allston","Beacon Hill","Chinatown","Bay Village","Downtown","West End","Roxbury","Dorchester","Roslindale","Mattapan","Hyde Park","West Roxbury","Jamaica Plain","Mission Hill","South Boston","Charlestown","East Boston","Mid Dorchester"],a.state={suggestions:[""],text:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"renderSuggestions",value:function(){var e=this,t=this.props.suggestions;return 0===t.length?null:l.a.createElement("ul",null,t.map((function(t){return l.a.createElement("li",{onClick:function(){return e.handleLocationSelect(t)},key:e.props.posts.id},l.a.createElement("i",{className:"fas fa-search"}),t)})))}},{key:"render",value:function(){var e,t=this.props.value;return l.a.createElement("div",{id:"locationSelector"},l.a.createElement("input",(e={type:"text",name:"location",onKeyPress:this.props.handleChange},Object(c.a)(e,"type","text"),Object(c.a)(e,"onChange",this.onTextChanged),Object(c.a)(e,"value",t||""),Object(c.a)(e,"placeholder","Enter neighborhood..."),e)),this.renderSuggestions())}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={value:"",predictions:[]},a.onChange=a.onChange.bind(Object(W.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getPredictions",value:function(e){return["Fenway/Kenmore","Back Bay","Brighton","North End","South End","Cambridge","Somerville","Financial District","Harvard Square","Copley Square"].filter((function(t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"onChange",value:function(e){var t=this;clearTimeout(this.timeout);var a=e.target.value;this.setState({value:a}),a.length>0?this.timeout=setTimeout((function(){var e=t.getPredictions(a);t.setState({predictions:e})}),250):this.setState({predictions:[]})}},{key:"render",value:function(){return l.a.createElement("div",{id:"filterDeals"},l.a.createElement(N,{handleSelect:this.props.handleSelect,handleChange:this.props.handleChange,suggestions:this.props.suggestions,onTextChanged:this.props.onTextChanged,value:this.props.value,posts:this.props.posts}),l.a.createElement("div",{id:"dayOfWeekSelector"},l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Sunday",defaultChecked:"Sunday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Sun")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Monday",defaultChecked:"Monday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Mon")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Tuesday",defaultChecked:"Tuesday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Tues")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Wednesday",defaultChecked:"Wednesday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Wed")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Thursday",defaultChecked:"Thursday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Thu")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Friday",defaultChecked:"Friday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Fri")),l.a.createElement("label",null,l.a.createElement("input",{onClick:this.props.handleDayChange,type:"radio",name:"dayOfWeek",value:"Saturday",defaultChecked:"Saturday"===this.props.dayOfWeek}),l.a.createElement("span",null,"Sat"))))}}]),t}(n.Component),w=function(){return l.a.createElement("footer",null,l.a.createElement("div",{className:"footer"},l.a.createElement("h5",null,"BOSTONS DEALS")))},T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()],D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={location:"",dayOfWeek:T,posts:[],suggestions:[],value:""},a.posts=[],a.handleChange=function(e){if("Enter"===e.key){var t=a.state.suggestions[0];void 0===t&&(t=e.target.value),a.setState({value:t,location:t}),a.setState({suggestions:[]}),void 0===t&&(t=e.target.value),a.setState({value:a.state.suggestions[0],location:t}),a.setState({suggestions:[]},console.log(t))}},a.handleSelect=function(e){a.setState({location:e})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleDayChange",value:function(e){this.setState({dayOfWeek:e.target.value})}},{key:"onTextChanged",value:function(e,t,a){this.setState({suggestions:e,value:t})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("main",{className:"bg-img"},l.a.createElement("h1",{className:"header",id:"header"},"Boston's Deals"),l.a.createElement(j,Object(c.a)({handleDayChange:this.handleDayChange.bind(this),handleChange:this.handleChange.bind(this),dayOfWeek:this.state.dayOfWeek,location:this.state.location,posts:this.posts,handleSelect:this.handleSelect.bind(this),suggestions:this.state.suggestions,onTextChanged:this.onTextChanged.bind(this),value:this.state.value},"posts",this.state.posts)),l.a.createElement(S,{dayOfWeek:this.state.dayOfWeek,location:this.state.location,posts:this.state.posts})),l.a.createElement(w,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=new i.a({uri:"http://localhost:4000/graphql"});o.a.render(l.a.createElement(r.a,{client:x},l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[170,1,2]]]);
//# sourceMappingURL=main.05094154.chunk.js.map